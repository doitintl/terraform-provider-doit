---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "doit_allocation_group Resource - terraform-provider-doit"
subcategory: ""
description: |-
  Allocation Groups allow you to group multiple allocations together.
---

# doit_allocation_group (Resource)

Allocation Groups allow you to group multiple allocations together.

## Example Usage

```terraform
# Create allocations for Japan and Germany in a K8s project
resource "doit_allocation" "name" {
  name = "Japan in K8s project"
  rule = {
    formula = "A AND B"
    components = [{
      key    = "country"
      mode   = "is"
      type   = "fixed"
      values = ["JP"]
      },
      {
        key    = "project_id"
        mode   = "is"
        type   = "fixed"
        values = ["test-k8s-project-468707"]
    }]
  }
}

resource "doit_allocation" "name2" {
  name = "Germany in K8s project"
  rule = {
    formula = "A AND B"
    components = [{
      key    = "country"
      mode   = "is"
      type   = "fixed"
      values = ["DE"]
      },
      {
        key    = "project_id"
        mode   = "is"
        type   = "fixed"
        values = ["test-k8s-project-468707"]
    }]
  }
}

# Create an allocation group for the allocations, referencinng the allocations for Germany and Japan and adding another one in-line for the US
resource "doit_allocation_group" "this" {
  name = "My Allocation Group"
  rules = [
    {
      action = "select"
      id     = doit_allocation.name.id
      components = doit_allocation.name.rule.components
      formula    = doit_allocation.name.rule.formula
    },
    {
      action = "select"
      id     = doit_allocation.name2.id
      components = doit_allocation.name2.rule.components
      formula    = doit_allocation.name2.rule.formula
    },
    {
      action      = "create"
      name        = "test-rule-%d"
      description = "Terraform test rule"
      components = [
        {
          key    = "country"
          mode   = "is"
          type   = "fixed"
          values = ["US"]
        },
        {
          key    = "project_id"
          mode   = "is"
          type   = "fixed"
          values = ["test-k8s-project-468707"]
        },
      ],
      formula = "A AND B"
    },
  ]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) The name of the allocation group. Must be unique within the organization.
- `rules` (Attributes List) The list of allocation rules that make up this group. (see [below for nested schema](#nestedatt--rules))

### Optional

- `description` (String) A description of the allocation group.
- `unallocated_costs` (String) Custom label for any values that do not fit into attributions.

### Read-Only

- `allocation_type` (String) Type of the allocation (e.g., 'preset', 'custom').
- `cloud` (String) The cloud provider (e.g., 'google-cloud', 'aws').
- `id` (String) Allocation ID
- `time_created` (Number) The time when the allocation group was created, in milliseconds since the epoch (i.e. UNIX timestamp).
- `time_modified` (Number) The time when the allocation group was last modified, in milliseconds since the epoch (i.e. UNIX timestamp).
- `type` (String) The type of the allocation. Can be 'preset' or 'custom'.

<a id="nestedatt--rules"></a>
### Nested Schema for `rules`

Required:

- `action` (String) Action to perform with this rule
- `components` (Attributes List) List of allocation filter components (required for 'create' or 'update' action) (see [below for nested schema](#nestedatt--rules--components))
- `formula` (String) Formula for combining components (A is the first component, B is the second one, etc.)

Optional:

- `description` (String) Description for the allocation rule
- `id` (String) ID of existing allocation (required for 'update' or 'select' action)
- `name` (String) Name for the allocation rule

Read-Only:

- `allocation_type` (String) Type of allocation (single or group)
- `create_time` (Number) The time when the allocation was created (in UNIX timestamp).
- `owner` (String) Allocation owner
- `type` (String) Type of allocation (preset or custom)
- `update_time` (Number) Last time the allocation was modified (in UNIX timestamp).
- `url_ui` (String) URL to view the allocation in DoiT Cloud Navigator.

<a id="nestedatt--rules--components"></a>
### Nested Schema for `rules.components`

Required:

- `key` (String) Key of a dimension. Examples: "billing_account_id", "country", etc. Dimension must exist.
- `mode` (String) Filter mode to apply
- `type` (String)
- `values` (List of String)

Optional:

- `include_null` (Boolean) Include null values
- `inverse_selection` (Boolean) If true, all selected values will be excluded.
